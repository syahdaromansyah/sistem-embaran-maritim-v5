<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/216b2461f6.js"
      crossorigin="anonymous"
    ></script>
    <title>SEMAR</title>
    <link rel="icon" href="/favicon.png" type="image/png" />
  </head>
  <body>
    <!-- Navigation Page -->
    <nav
      class="sticky top-0 left-0 z-50 w-full bg-slate-50/25 shadow shadow-slate-200 backdrop-blur"
    >
      <!-- Navigation Page Container -->
      <div class="container mx-auto">
        <div class="flex items-center justify-between py-3.5">
          <!-- Navigation Page Left -->
          <a
            href="/pages/user/dashboardrangkuman/"
            class="inline-block py-1 transition duration-300 focus:outline-none focus:ring focus:ring-sky-300 focus:ring-offset-2 focus:ring-offset-slate-50"
          >
            <img
              src="/pages/user/dist/img/LOGO-SEMAR.png"
              alt="SEMAR-Sistem Embaran Maritim"
              class="h-11"
            />
          </a>
          <!-- Navigation Page Right -->
          <div class="flex items-center px-4">
            <button class="profil">
              <img
                src="/pages/user/dist/img/user.png"
                alt="Profile"
                class="border-5 mr-4 w-11 rounded"
              />
            </button>
          </div>
        </div>
      </div>
    </nav>
    <!-- Navigation Menu -->
    <div class="flex justify-end">
      <div
        class="navprofil fixed right-0 top-20 z-50 hidden h-full w-72 items-center bg-sky-700 text-slate-50"
      >
        <div class="p-7">
          <div class="flex items-center py-5">
            <img
              src="/pages/user/dist/img/user.png"
              alt="Profile"
              class="mr-4 w-11 rounded"
            />
            <div>
              <p class="profile-name text-lg font-semibold">Admin</p>
              <p class="profile-role text-xs">Admin</p>
            </div>
          </div>
          <ul class="mt-4">
            <li
              class="my-2 rounded-xl py-1 px-7 hover:bg-slate-100 hover:text-sky-600"
            >
              <a href="/pages/user/dashboardpeta/" class="flex items-center">
                <i class="fa-solid fa-grip icon-slate-50 fa-lg pr-2"></i>
                <p>Dashboard</p>
              </a>
            </li>
            <li
              class="admin-menu-only my-2 rounded-xl py-1 px-7 hover:bg-slate-100 hover:text-sky-600"
            >
              <a href="/pages/user-manage/" class="flex items-center">
                <i class="fa-solid fa-user-gear icon-slate-50 fa-lg mr-2"></i>
                <p>Management User</p>
              </a>
            </li>
            <li
              class="admin-menu-only my-2 rounded-xl py-1 px-7 hover:bg-slate-100 hover:text-sky-600"
            >
              <a href="/pages/user/validasi-data/" class="flex items-center">
                <i class="fa-solid fa-clipboard icon-slate-50 fa-lg mr-2"></i>
                <p>Validasi Data</p>
              </a>
            </li>
            <li
              class="my-2 rounded-xl py-1 px-7 hover:bg-slate-100 hover:text-sky-600"
            >
              <a href="/pages/user/info/" class="flex items-center">
                <i class="fa-solid fa-circle-info icon-slate-50 fa-lg mr-2"></i>
                <p>Info</p>
              </a>
            </li>
            <li
              class="my-2 rounded-xl py-1 px-7 hover:bg-slate-100 hover:text-sky-600"
            >
              <button class="logout-btn flex items-center">
                <i
                  class="fa-solid fa-right-from-bracket icon-slate-50 fa-lg mr-2"
                ></i>
                <p>Logout</p>
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div class="mx-36">
      <div class="container my-40 h-full rounded-3xl border-2 p-36 px-28">
        <h2 class="-my-28 -mx-14 pt-2 text-left text-2xl font-bold">
          Tambahkan pengguna
        </h2>
        <hr class="my-28 -mx-14 w-32 border-2 border-sky-900" />
        <div class="container">
          <form>
            <table
              class="-mt-20 table-auto border-separate border-spacing-y-4 py-2"
            >
              <tr>
                <td><i class="fa-solid fa-user"></i> Nama</td>
                <td>
                  <input
                    type="text"
                    name="nama"
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <i class="fa-solid fa-user"></i>
                  Username
                </td>
                <td>
                  <input
                    type="text"
                    name="nama"
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                  />
                </td>
              </tr>
              <tr>
                <td><i class="fa-solid fa-building-columns"></i> Instansi</td>
                <td>
                  <input
                    type="text"
                    name="nama"
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <i class="fa-solid fa-envelope"></i>
                  Email
                </td>
                <td>
                  <input
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                    type="email"
                    name="email"
                  />
                </td>
              </tr>
              <tr>
                <td><i class="fa-solid fa-circle-nodes"></i> Role</td>
                <td>
                  <input
                    type="text"
                    name="nama"
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                  />
                </td>
              </tr>
              <tr>
                <td>
                  <i class="fa-solid fa-atom"></i>
                  Fitur
                </td>
                <td>
                  <input
                    type="checkbox"
                    name="Fitur"
                    value="atmospheric"
                    checked
                  />
                  Atmospheric
                  <input type="checkbox" name="Fitur" value="ocean" />
                  Ocean
                  <input type="checkbox" name="Fitur" value="fisherman" />
                  Fisherman
                  <input type="checkbox" name="Fitur" value="transportation" />
                  Transportation
                </td>
              </tr>
              <tr>
                <td>
                  <i class="fa-solid fa-unlock"></i>
                  Password
                </td>
                <td>
                  <input
                    class="w-[600px] rounded-full border border-slate-200 px-2"
                    type="password"
                    name="nama"
                  />
                </td>
              </tr>
              <tbody class="table-users"></tbody>
            </table>
            <button
              type="submit"
              class="float-right mx-1 rounded-full border bg-blue-900 px-4 py-1 text-white"
            >
              Simpan
            </button>
            <button
              type="button"
              class="float-right mx-1 rounded-full border bg-gray-500 px-6 py-1 text-white"
            >
              <a href="/pages/user-manage/">Batal</a>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <p class="py-7 text-center font-bold">
        &#169;BRIN, Hak cipta dilindungi.
      </p>
    </footer>

    <script type="module" src="/pages/user/dist/js/script.js"></script>
    <!-- <script type="module" src="/pages/user-manage/script.js"></script> -->

    <script type="module">
      const formAddUser = document.querySelector('.form-add-user');
      formAddUser?.addEventListener('submit', (e) => {
        e.preventDefault();
        const eventTarget = e.target;
        const nameValue = eventTarget['0'].value;
        const unameValue = eventTarget['1'].value
          .split('')
          .filter((char) => char !== ' ')
          .join('')
          .toLowerCase();
        const uAgencyValue = eventTarget['2'].value;
        const uEmailValue = eventTarget['3'].value
          .split('')
          .filter((char) => char !== ' ')
          .join('')
          .toLowerCase();
        const uRoleValue = eventTarget['4'].value;
        const atmosphereValue = eventTarget['5'].checked;
        const oceanValue = eventTarget['6'].checked;
        const fishermanValue = eventTarget['7'].checked;
        const transportationValue = eventTarget['8'].checked;
        const uPwdValue = eventTarget['9'].value;

        const inputTextEmpty =
          nameValue === '' ||
          unameValue === '' ||
          uAgencyValue === '' ||
          uEmailValue === '' ||
          uRoleValue === '' ||
          uPwdValue === '';

        const fiturEmpty =
          !atmosphereValue &&
          !transportationValue &&
          !oceanValue &&
          !fishermanValue;

        if (inputTextEmpty) return alert('Isi seluruh form dengan benar.');
        if (fiturEmpty)
          return alert('Mohon untuk pilih salah satu atau semua fitur.');

        const usersLocalStorage = JSON.parse(
          window.localStorage.getItem('users')
        );

        usersLocalStorage.push({
          name: nameValue,
          username: unameValue,
          agency: uAgencyValue,
          email: uEmailValue,
          role: uRoleValue,
          password: uPwdValue,
          feature: {
            atmosphere: atmosphereValue,
            ocean: oceanValue,
            transportation: transportationValue,
            fisherman: fishermanValue,
          },
        });

        window.localStorage.setItem('users', JSON.stringify(usersLocalStorage));
        window.localStorage.setItem('current-change-user', '');

        window.location.replace('/pages/user-manage/');
      });

      const isLogin = window.localStorage.getItem('current-user-name');
      if (isLogin === '') {
        window.location.replace('/');
      }
    </script>
  </body>
</html>
